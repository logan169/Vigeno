<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>

    <style>
    scroll{
    font-family:Arial, sans-serif;
    font-size:14px;
    font-weight:normal;
    padding:20px 20px;
    border-style:solid;
    border-width:1px;
    overflow:auto;
    max-width:50px;
}
</style>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
</head>
<body onload="startSeq();changeColor('rawSeq',0);changeColor('seq',0)">

<!--ici on imprime les variable dans le navigateur-->

<table class="scroll">
    <thead>
    <th></th>
    </thead>
    <tbody>
    <td>
<p id="rawSeq">acgtagctgagctgcagctagcacgtagctgagctgcacgtagctgagctgctagcacgtagctgagctgcacgtagctgagctgctagcacgtagctgagctgcacgtagctgagctgctagcacgtagctgagctgcacgtagctgagctgctagcacgtagctgagctgcacgtagctgagctgctagcacgtagctgagctgcacgtagctgagctgctagcacgtagctgagctgcacgtagctgagctgctagcacgtagctgagctgcacgtagctgagctgcagctagctagctgactggatgtcgatgcgactgatcgtactcatgctgatgcgtaagctagctagctgactggatgtcgatgcgactgatcgtactcatgctgatgcgtatagctgactgacgtagctgagctgcagctagctagctgactggatgtcgatgcgactgatcgtactcatgctgatgcgtagatgtacgtagctgagctgcagctagctagctgactggatgtcgatgcgactgatcgtactcatgctgatgcgtacgatgacgtagctgagctgcagctagctagctgactggatgtcgatgcgactgatcgtactcatgctgatgcgtacgactgatcgtactcatgctgatgcgta</p>
</td>
     <td><p id="rawSeqLength" ></p></td>
 <td><p id="seq" ></p></td>
 <td><p id="seqLength"></p></td>
 <td><p id="start">0</p></td>
 <td><p id="end">100</p></td>
    </tbody>
</div>
<button onclick="moveSeqLeft(document.getElementById('rawSeq').innerHTML,document.getElementById('start').innerHTML,document.getElementById('end').innerHTML);changeColor('seq',0)" type="button" class="btn btn-info btn-xs"><span class="glyphicon glyphicon-arrow-left"></span> </button>
<button onclick="moveSeqRigth(document.getElementById('rawSeq').innerHTML,document.getElementById('start').innerHTML,document.getElementById('end').innerHTML);changeColor('seq',0)" type="button" class="btn btn-info btn-xs"><span class="glyphicon glyphicon-arrow-right"></span> </button>

<script>
//ON LOAD, seq is seq.substr(start,end)

var startSeq= function(){
console.log((document.getElementById('rawSeq').innerHTML).substr(document.getElementById('start').innerHTML,document.getElementById('end').innerHTML));
document.getElementById('seq').innerHTML='';
document.getElementById('seq').innerHTML=(document.getElementById('rawSeq').innerHTML).substr(document.getElementById('start').innerHTML,document.getElementById('end').innerHTML);
}

/* Need to add the id seq to the line */

var changeColor=function(id, readingFrame){

    var output=function(str,readingFrame){
		var codons = [];

		outputStr='';
    	outputStr+='<font style="background-color:yellow;">';
        outputStr=str.substring(0,readingFrame);
        outputStr+= '</font>' ;

		for (var i = 0, charsLength = str.length; i < charsLength; i += 3) {
    		codons.push(str.substring(i+readingFrame, i + 3 +readingFrame));
		};



        for (var element=0, listeLength=codons.length; element<listeLength; element++){

            if (element%2==0){
        	outputStr+='<font style="background-color:red;">';
        	outputStr+= (codons[element]);
            outputStr+= '</font>';
            }

        else{
            outputStr+='<font style="background-color:yellow;">';
        	outputStr+= (codons[element]);
            outputStr+= '</font>' ;
        	}
    	};

    	return(outputStr);
    	};

document.getElementById(id).innerHTML= (output(document.getElementById(id).innerHTML,readingFrame));
};

</script>

<script>
/*
Ce script permet d'afficher une nouvelle sous string d'une string mere

output type: ["***atcgtagcg", 0, 9] string fille, new start, new end
*/



var moveSeqRigth=function(str,oldStart,oldEnd){

    newStart=parseInt(oldStart)+1;
    newEnd=parseInt(oldEnd)+1;
    message="***";

    console.log(oldEnd);
    console.log(parseInt(oldEnd)+1);
    console.log(newEnd<(document.getElementById('seq').innerHTML).length);

    if (newEnd<str.length){
    	newStr= str.substr(newStart,newEnd);
    }
    else{
        newStart=parseInt(str.length)-1;
        newEnd=str.length;
        newStr= str.substr(newStart,newEnd)+message;
    }
    outputlist=[newStr,newStart,newEnd];
    document.getElementById('seq').innerHTML=newStr;
    document.getElementById('seqLength').innerHTML=newStr.length;
    document.getElementById('start').innerHTML=newStart;
    document.getElementById('end').innerHTML=newEnd;
    return (outputlist);

};

//////////////////////////////////////////////////////////////////////


var moveSeqLeft=function(str,oldStart,oldEnd){

    newStart=parseInt(oldStart)-1;
    newEnd=parseInt(oldEnd)-1;
    message="***";

    if (newStart>=0){
    	newStr= str.substr(newStart,newEnd);
    }

    else{
        newStart=0;
        newEnd=1;
        newStr=message+str.substr(newStart,newEnd);
    }

    outputlist=[newStr,newStart,newEnd];
    document.getElementById('seq').innerHTML=newStr;
    document.getElementById('seqLength').innerHTML=newStr.length;
    document.getElementById('start').innerHTML=newStart;
    document.getElementById('end').innerHTML=newEnd;
    return (outputlist);
};

//moveSeqLeft(str,start,end);
//moveSeqRigth(str,start,end);

</script>

</body>
</html>